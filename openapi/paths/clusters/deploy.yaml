post:
  operationId: deployCluster
  tags: [clusters]
  summary: Deploy a new cluster
  description: |
    **Deploy a new cluster**
    
    Initiate the deployment of a cluster that is in the `PENDING` state. This operation will start 
    the Kubernetes cluster deployment process, configuring all nodes and setting up the cluster 
    infrastructure.
    
    **Prerequisites:**
    - The cluster must be in the `PENDING` state
    - The cluster must have at least one control plane node and one worker node assigned
    - All assigned nodes must be in the `available` state
    
    **Behavior:**
    - The cluster deployment will begin as soon as possible
    - The cluster will transition to the `DEPLOYING` state
    - The deployment process may take several minutes to complete
    - Once deployment completes, the cluster will transition to the `READY` state
    - If deployment fails, the cluster will transition to the `FAILED` state
    
    **Response:**
    Returns the cluster ID to confirm the deployment has been initiated.

  parameters:
    - name: cluster_id
      in: path
      required: true
      schema:
        type: string
        format: uuid
        description: The ID of the cluster to deploy

  responses:
    '202':
      $ref: '../../components/responses/cluster-deploy-response.yaml'
      useExample: success
    '400':
      $ref: '../../components/responses/error-response.yaml'
      useExample: cluster-not-in-staging-state
    '404':
      $ref: '../../components/responses/error-response.yaml'
      useExample: cluster-not-found
    '409':
      $ref: '../../components/responses/error-response.yaml'
      useExample: cluster-no-nodes-in-staging
    '500':
      $ref: '../../components/responses/error-response.yaml'
      useExample: server-error