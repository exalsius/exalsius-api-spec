type: object
required:
  - name
  - cluster_type
properties:
  name:
    type: string
    description: The name of the cluster
    example: "my-cluster"
  cluster_type:
    type: string
    enum: [CLOUD, REMOTE, ADOPTED, DOCKER]
    x-enum-varnames: [CLOUD, REMOTE, ADOPTED, DOCKER]
    description: >
      The type of the cluster.
      - `CLOUD`: Cloud cluster, consisting of cloud instances
      - `REMOTE`: Remote cluster, consisting of self-managed nodes
      - `ADOPTED`: Adopted cluster, consisting of an already existing kubernetes cluster
      - `DOCKER`: Docker cluster, consisting of docker containers (for local testing and development)
  vpn_cluster:
    type: boolean
    description: Whether the cluster is a VPN cluster (optional). If not provided, the cluster will not be a VPN cluster.
    example: false
    default: false
  colony_id:
    type: string
    description: The ID of the colony to add the cluster to (optional). If not provided, the cluster will be added to the default colony.
    example: "123e4567-e89b-12d3-a456-426614174000"
  cluster_labels:
    type: object
    additionalProperties:
      type: string
    description: The labels of the cluster (optional).
    example: {"cluster.exalsius.ai/gpu-type": "nvidia", "cluster.exalsius.ai/workload-type": "volcano"}
  machine_pre_start_commands:
    type: array
    items:
      type: string
    description: The commands to run on the machine before the cluster is started (optional).
    example: ["echo 'Hello, world!'"]
  local_storage:
    type: object
    description: Local storage configuration
    properties:
      enabled:
        type: boolean
        description: Enable local storage provisioner
        default: true
        example: true
      basePath:
        type: string
        description: Base path for local storage. If empty, /var/openebs/local will be used
        example: "/mnt/local-storage"
  k8s_version:
    type: string
    description: The Kubernetes version of the cluster
    example: "1.30"
  to_be_deleted_at:
    type: string
    format: date-time
    description: The date and time the cluster will be deleted (optional).
    example: "2025-02-01T00:00:00Z"
  control_plane_node_ids:
    type: array
    items:
      type: string
    description: The IDs of the control plane nodes (optional).
    example: ["123e4567-e89b-12d3-a456-426614174000"]
  worker_node_ids:
    type: array
    items:
      type: string
    description: The IDs of the worker nodes (optional).
    example: ["123e4567-e89b-12d3-a456-426614174000"]
  service_deployments:
    type: array
    items:
      $ref: '../schemas/service-deployment.yaml'
    description: The services to deploy in the cluster (optional).
    example: [{"service_id": "ffd4c2f4-ec48-41f1-be56-52ba90f661b6", "service_name": "my-service", "values": {"key": "value"}}]
